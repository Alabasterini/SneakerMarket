<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:model="clr-namespace:WorkName.Models"
             x:Class="WorkName.ProductPage"
             BackgroundColor="White"
             Title="Szczegóły produktu">
	
	<ScrollView>
		<VerticalStackLayout Padding="20" Spacing="15">

			<Image x:Name="ProductImage" HeightRequest="250" Aspect="AspectFit" />
			<Label x:Name="ProductNameLabel" FontSize="24" FontAttributes="Bold" HorizontalOptions="Center" />
			<Label x:Name="ColorwayLabel" FontSize="14" TextColor="Gray" HorizontalOptions="Center" />

			<Line HeightRequest="1" BackgroundColor="#E0E0E0" />

			<Label Text="Wybierz rozmiar (US):" FontAttributes="Bold" />
			<ScrollView Orientation="Horizontal" HorizontalScrollBarVisibility="Never">
				<HorizontalStackLayout x:Name="SizesLayout" Spacing="10" Padding="0,5">
					<Button Text="8" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="8.5" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="9" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="9.5" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="10" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="10.5" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="11" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="11.5" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
					<Button Text="12" BackgroundColor="White" TextColor="Black" CornerRadius="10" Padding="15,0" BorderWidth="1" BorderColor="#E0E0E0" Clicked="OnSizeClicked" HeightRequest="40"/>
				</HorizontalStackLayout>
			</ScrollView>

			<Grid ColumnDefinitions="*, *" ColumnSpacing="10">
				<Button Grid.Column="0" Text="Stwórz ofertę" Clicked="OnMakeOfferClicked" BackgroundColor="White" BorderWidth="1" BorderColor="Black" TextColor="Black" />
				<Button Grid.Column="1" Text="Dodaj do koszyka" Clicked="OnAddToCartClicked" BackgroundColor="Black" TextColor="White" />
			</Grid>

			<Label Text="Dostępne oferty:" FontSize="16" FontAttributes="Bold" Margin="0,10,0,0"/>

			<RefreshView Grid.Row="3">
				<CollectionView x:Name="ProductsListView"
                                SelectionMode="Single"
                                SelectionChanged="OnListingSelected"
                                HeightRequest="400">

					<CollectionView.ItemsLayout>
						<GridItemsLayout Orientation="Vertical" Span="1" VerticalItemSpacing="10" />
					</CollectionView.ItemsLayout>

					<CollectionView.ItemTemplate>
						<DataTemplate x:DataType="model:Listings">
							<Border StrokeShape="RoundRectangle 10" StrokeThickness="1" Stroke="#E0E0E0" BackgroundColor="White" Padding="15">
								<VisualStateManager.VisualStateGroups>
									<VisualStateGroup x:Name="CommonStates">
										<VisualState x:Name="Normal">
											<VisualState.Setters>
												<Setter Property="BackgroundColor" Value="White" />
												<Setter Property="Stroke" Value="#E0E0E0" />
											</VisualState.Setters>
										</VisualState>

										<VisualState x:Name="Selected">
											<VisualState.Setters>
												<Setter Property="BackgroundColor" Value="LightSkyBlue" />
												<Setter Property="Stroke" Value="Blue" />
											</VisualState.Setters>
										</VisualState>
									</VisualStateGroup>
								</VisualStateManager.VisualStateGroups>
								<Grid ColumnDefinitions="*, Auto, Auto" ColumnSpacing="15">

									<VerticalStackLayout Grid.Column="0" VerticalOptions="Center">
										<Label Text="Stan produktu:" FontSize="10" TextColor="Gray" />
										<Label Text="{Binding stan}" FontSize="12" FontAttributes="Bold" TextColor="Black" />
									</VerticalStackLayout>

									<Label Grid.Column="1" Text="{Binding rozmiar}"
                                           FontSize="14" FontAttributes="Bold" TextColor="Black" VerticalOptions="Center"/>

									<Label Grid.Column="2" Text="{Binding cena_oferowana, StringFormat='{0:F2} USD'}"
                                           FontSize="18" FontAttributes="Bold" TextColor="#2E7D32" VerticalOptions="Center" />

								</Grid>
							</Border>
						</DataTemplate>
					</CollectionView.ItemTemplate>
				</CollectionView>
			</RefreshView>

		</VerticalStackLayout>
	</ScrollView>
</ContentPage>